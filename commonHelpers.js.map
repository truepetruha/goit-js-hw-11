{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst modalLightboxGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst searchForm = document.querySelector('.js-search-form');\nconst ulEl = document.querySelector('.list-photo');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', handleSearch);\nloader.style.display = 'none';\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  loader.style.display = 'inline-block';\n\n  ulEl.innerHTML = '';\n  const form = event.currentTarget;\n  const query = form.elements.query.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      title: 'Error',\n      color: 'yellow',\n      message: 'Please search for something',\n    });\n    loader.style.display = 'none';\n    return;\n  }\n\n  searchPhoto(query)\n    .then(data => {\n      if (!data.hits.length) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n\n        return;\n      }\n      ulEl.innerHTML = markupPhoto(data.hits);\n      modalLightboxGallery.refresh();\n    })\n    .catch(onFetchError)\n    .finally(() => {\n      form.reset();\n      loader.style.display = 'none';\n    });\n  // проблема була в тому що я вставив loader.style.display = 'none' не у файналі, тобто промахнувся і вставив його за дужку, воно було під ним і мабуть тому воно не показувало)\n}\nfunction searchPhoto(value) {\n  const BASE_URL = 'https://pixabay.com/api';\n  const API_KEY = '41849458-2d98265cf06659a45ba73a30c';\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const url = `${BASE_URL}/?${urlParams}`;\n  return fetch(url).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\nfunction markupPhoto(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n            />\n          </a>\n          <ul class=\"img-list\">\n  <li class=\"img-info\">\n   <p class=\"img-text\">Likes: <br><span>${likes}</span></p>\n   <p class=\"img-text\">Views: <br><span>${views}</span></p>\n   <p class=\"img-text\">Comment: <br><span>${comments}</span></p>\n   <p class=\"img-text\">Downloads: <br><span>${downloads}</span></p>\n   </li>\n   </ul>\n        </li>`\n    )\n    .join('');\n}\n\nfunction onFetchError(error) {\n  console.error(error);\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}"],"names":["modalLightboxGallery","SimpleLightbox","searchForm","ulEl","loader","handleSearch","event","form","query","iziToast","searchPhoto","data","markupPhoto","onFetchError","value","BASE_URL","API_KEY","urlParams","url","resp","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error"],"mappings":"6vBAMA,MAAMA,EAAuB,IAAIC,EAAe,aAAc,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CF,EAAW,iBAAiB,SAAUG,CAAY,EAClDD,EAAO,MAAM,QAAU,OAEvB,SAASC,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpBF,EAAO,MAAM,QAAU,eAEvBD,EAAK,UAAY,GACjB,MAAMI,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAAM,OAExC,GAAIC,IAAU,GAAI,CAChBC,EAAS,KAAK,CACZ,MAAO,QACP,MAAO,SACP,QAAS,6BACf,CAAK,EACDL,EAAO,MAAM,QAAU,OACvB,MACD,CAEDM,EAAYF,CAAK,EACd,KAAKG,GAAQ,CACZ,GAAI,CAACA,EAAK,KAAK,OAAQ,CACrBF,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAED,MACD,CACDN,EAAK,UAAYS,EAAYD,EAAK,IAAI,EACtCX,EAAqB,QAAO,CAClC,CAAK,EACA,MAAMa,CAAY,EAClB,QAAQ,IAAM,CACbN,EAAK,MAAK,EACVH,EAAO,MAAM,QAAU,MAC7B,CAAK,CAEL,CACA,SAASM,EAAYI,EAAO,CAC1B,MAAMC,EAAW,0BACXC,EAAU,qCACVC,EAAY,IAAI,gBAAgB,CACpC,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACKI,EAAM,GAAGH,CAAQ,KAAKE,CAAS,GACrC,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAGjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASP,EAAYQ,EAAK,CACxB,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,0CACkCL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAMiBC,CAAK;AAAA,0CACLC,CAAK;AAAA,4CACHC,CAAQ;AAAA,8CACNC,CAAS;AAAA;AAAA;AAAA,cAIlD,EACA,KAAK,EAAE,CACZ,CAEA,SAASd,EAAae,EAAO,CAC3B,QAAQ,MAAMA,CAAK,EACnBnB,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACN,CAAG,CACH"}